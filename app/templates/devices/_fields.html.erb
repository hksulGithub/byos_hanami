<fieldset role="group" class="group">
  <%= scope(:form_field, key: :model_id, errors:).render do %>
    <label class="key" for="device_model_id">
      Model
      <%= render "shared/popovers/trigger", name: :model %>
    </label>

    <%= tag.select id: :device_model_id, name: "device[model_id]", class: :value do %>
      <% select_options_for(models).each do |label, id| %>
        <%= tag.option label, value: id, selected: id == field_for(:model_id, fields, device) %>
      <% end %>
    <% end %>
  <% end %>

  <%= scope(:form_field, key: :playlist_id, errors:).render do %>
    <label class="key" for="device_playlist_id">
      Playlist
      <%= render "shared/popovers/trigger", name: :playlist %>
    </label>

    <%= tag.select id: :device_playlist_id, name: "device[playlist_id]", class: :value do %>
      <% select_options_for(playlists).each do |label, id| %>
        <%= tag.option label, value: id, selected: id == field_for(:playlist_id, fields, device) %>
      <% end %>
    <% end %>
  <% end %>

  <%= scope(:form_field, key: :label, errors:).render do %>
    <label class="key" for="device_label">Label</label>

    <%= tag.input id: :device_label,
                  name: "device[label]",
                  value: field_for(:label, fields, device),
                  class: :value,
                  autocomplete: :label %>
  <% end %>

  <%= scope(:form_field, key: :friendly_id, errors:).render do %>
    <label class="key" for="device_friendly_id">
      Friendly ID
      <%= render "shared/popovers/trigger", name: :friendly_id %>
    </label>

    <%= tag.input id: :device_friendly_id,
                  name: "device[friendly_id]",
                  value: field_for(:friendly_id, fields, device),
                  class: :value,
                  autocomplete: :friendly_id %>
  <% end %>

  <%= scope(:form_field, key: :mac_address, errors:).render do %>
    <label class="key" for="device_mac_address">
      MAC Address
      <%= render "shared/popovers/trigger", name: :mac_address %>
    </label>

    <div class="input-group" x-data="{ show: false }">
      <%= tag.input id: :device_mac_address,
                    name: "device[mac_address]",
                    value: field_for(:mac_address, fields, device),
                    class: "value value-half",
                    "x-bind:type" => "show ? 'text' : 'password'"%>

      <%= render "shared/visibility_button" %>
    </div>
  <% end %>

  <%= scope(:form_field, key: :api_key, errors:).render do %>
    <label class="key" for="device_api_key">
      API Key
      <%= render "shared/popovers/trigger", name: :api_key %>
    </label>

    <div class="input-group" x-data="{ show: false }">
      <%= tag.input id: :device_api_key,
                    name: "device[api_key]",
                    value: field_for(:api_key, fields, device),
                    class: "value value-half",
                    "x-bind:type" => "show ? 'text' : 'password'"%>

      <%= render "shared/visibility_button" %>
    </div>
  <% end %>

  <%= scope(:form_field, key: :refresh_rate, errors:).render do %>
    <label class="key" for="device_refresh_rate">
      Refresh Rate
      <%= render "shared/popovers/trigger", name: :refresh_rate %>
    </label>

    <%= tag.input id: :device_refresh_rate,
                  name: "device[refresh_rate]",
                  type: :number,
                  value: field_for(:refresh_rate, fields, device),
                  class: :value,
                  min: 20 %>
  <% end %>

  <%= scope(:form_field, key: :image_timeout, errors:).render do %>
    <label class="key" for="device_image_timeout">
      Image Timeout
      <%= render "shared/popovers/trigger", name: :image_timeout %>
    </label>

    <%= tag.input id: :device_image_timeout,
                  name: "device[image_timeout]",
                  type: :number,
                  value: field_for(:image_timeout, fields, device),
                  class: :value,
                  min: 0 %>
  <% end %>

  <%= scope(:form_field, key: :firmware_update, errors:).render do %>
    <label class="key" for="device_firmware_update">
      Firmware Update
      <%= render "shared/popovers/trigger", name: :firmware_update %>
    </label>

    <%= tag.input id: :device_firmware_update,
                  name: "device[firmware_update]",
                  type: :checkbox,
                  checked: field_for(:firmware_update, fields, device),
                  switch: true,
                  class: :checkbox %>
  <% end %>

  <%= scope(:form_field, key: :proxy, errors:).render do %>
    <label class="key" for="device_proxy">
      Proxy
      <%= render "shared/popovers/trigger", name: :proxy %>
    </label>

    <%= tag.input id: :device_proxy,
                  name: "device[proxy]",
                  type: :checkbox,
                  checked: field_for(:proxy, fields, device),
                  switch: true,
                  class: :checkbox %>
  <% end %>

  <%= scope(:form_field, key: :sleep_start_at, errors:).render do %>
    <label class="key" for="device_sleep_start_at">
      Sleep Start
      <%= render "shared/popovers/trigger", name: :sleep_start %>
    </label>

    <%= tag.input id: :device_sleep_start_at,
                  name: "device[sleep_start_at]",
                  type: :time,
                  value: field_for(:sleep_start_at, fields, device),
                  class: :value %>
  <% end %>

  <%= scope(:form_field, key: :sleep_stop_at, errors:).render do %>
    <label class="key" for="device_sleep_stop_at">
      Sleep Stop
      <%= render "shared/popovers/trigger", name: :sleep_end %>
    </label>

    <%= tag.input id: :device_sleep_stop_at,
                  name: "device[sleep_stop_at]",
                  type: :time,
                  value: field_for(:sleep_stop_at, fields, device),
                  class: :value %>
  <% end %>
</fieldset>

<%= render "popovers/all" %>
